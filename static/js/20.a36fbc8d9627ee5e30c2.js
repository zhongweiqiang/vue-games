webpackJsonp([20,50],{"0tCR":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("AaXs"),a=i("rxb8"),o=i("vMJZ"),r={components:{},data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),games:[],prices:[],users:[]}},created:function(){this.getGameList()},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,i){t||(console.log("Received values of form: ",i),e.$emit("search",i))})},handleGameChange:function(t){console.log("selected "+t),this.form.setFieldsValue({price_id:void 0}),this.getPriceList(t)},handleTypeChange:function(t){this.form.setFieldsValue({user_id:void 0}),this.getUserList(t)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getGameList:function(){var t=this;Object(n.e)().then(function(e){t.games=e.data})},getPriceList:function(t){var e=this;Object(a.g)({game_id:t}).then(function(t){e.prices=t.data})},getUserList:function(t){var e=this;Object(o.p)({user_type:t}).then(function(t){e.users=t.data})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"z-index":"999",height:"100%"}},[i("a-form",{attrs:{form:t.form,layout:"inline"},on:{submit:t.handleSubmit}},[i("a-row",{staticStyle:{"margin-left":"10px",clear:"both"}},[i("a-col",{staticStyle:{clear:"both"},attrs:{span:20}},[i("a-row",{staticStyle:{clear:"both"}},[i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:8,xl:8}},[i("a-form-item",[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["game_id"],expression:"['game_id']"}],staticStyle:{width:"200px"},attrs:{showSearch:"",placeholder:"选择游戏",optionFilterProp:"children",filterOption:t.filterOption,allowClear:""},on:{change:t.handleGameChange}},t._l(t.games,function(e){return i("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:8,xl:8}},[i("a-form-item",[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_id"],expression:"['price_id']"}],staticStyle:{width:"200px"},attrs:{showSearch:"",placeholder:"选择面值",optionFilterProp:"children",filterOption:t.filterOption,allowClear:""}},t._l(t.prices,function(e){return i("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.gold))])}),1)],1)],1),t._v(" "),i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:8,xl:8}},[i("a-form-item",[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],style:{width:"200px"},attrs:{allowClear:"",placeholder:"面值标识"}})],1)],1)],1)],1),t._v(" "),i("a-col",{style:{display:"flex",justifyItems:"center",alignItems:"center",height:"58px"},attrs:{xs:24,sm:24,md:24,lg:2,xl:2}},[i("a-form-item",[i("a-button",{attrs:{size:"small",type:"primary","html-type":"submit"}},[t._v("搜索")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(r,s,!1,function(t){i("lJ2V")},"data-v-774f3ec3",null);e.default=l.exports},lJ2V:function(t,e){},t3YB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),a=i.n(n),o=i("Dd8w"),r=i.n(o),s=i("rxb8"),l=i("uKtY"),c=i("yxO8"),d=i("0tCR"),u=[{title:"id",dataIndex:"id",sorter:!0,align:"center",fixed:"left"},{title:"游戏名称",dataIndex:"name",align:"center"},{title:"面值名称",dataIndex:"gold",align:"center"},{title:"面值标识",dataIndex:"title",align:"center"},{title:"面值价格",dataIndex:"money",align:"center"},{title:"创建时间",dataIndex:"created_at",align:"center"},{title:"状态",dataIndex:"status",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",fixed:"right"}],f={components:{PriceAdd:l.default,PriceEdit:c.default,PassSearch:d.default},data:function(){return{data:[],pagination:{pageSize:2},loading:!1,columns:u,gold:"",filters:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},watch:{gold:function(t,e){""==t&&this.fetch({pageSize:this.pagination.pageSize})}},methods:{onSearch:function(t){this.fetch(t)},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onAdd:function(){this.fetch({pageSize:this.pagination.pageSize})},onEdit:function(){this.fetch(this.getPagination())},onSelect:function(t){this.fetch(r()({},this.pagination,{game_id:t}))},status:function(t){var e=this;Object(s.i)({id:t}).then(function(t){console.log(t),e.fetch(e.getPagination())})},pass:function(t){var e=this;this.$confirm({content:"确认入库对该面值验证？",cancelText:"取消",okText:"确认",onOk:function(){return new a.a(function(i,n){Object(s.f)({id:t}).then(function(t){e.fetch(e.getPagination()),e.destroyAll()})})},onCancel:function(){e.destroyAll(),e.$message.info("取消恢复",2)}})},handleTableChange:function(t,e,i){var n=r()({},this.pagination);n.current=t.current,n.sortField=i.field,n.sortOrder=i.order,this.pagination=n,this.filters=e,this.fetch(r()({pageSize:t.pageSize,page:t.current,sortField:i.field,sortOrder:i.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,e.pass="passed",Object(s.e)(e).then(function(e){console.log(e.data);var i=r()({},t.pagination),n=e.data;t.data=n.data,i.total=n.total,t.pagination=i,t.loading=!1})},del:function(t){var e=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new a.a(function(i,n){Object(s.b)({id:t}).then(function(t){e.$message.success("删除成功"),e.fetch(r()({pageSize:e.pagination.pageSize,page:e.pagination.current,sortField:e.pagination.sortField,sortOrder:e.pagination.sortOrder},e.filters)),e.destroyAll()})})},onCancel:function(){e.destroyAll(),e.$message.info("取消删除",2)}})},destroyAll:function(){this.$destroyAll()}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-row",[i("a-col",{attrs:{span:18}},[i("pass-search",{on:{search:t.onSearch}})],1)],1),t._v(" "),i("a-row",[i("a-col",[i("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,scroll:{x:1e3}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e){return i("span",{},[i("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.pass(e.id)}}},[t._v("恢")])],1)}}])})],1)],1),t._v(" "),i("a-divider")],1)},staticRenderFns:[]};var g=i("VU/8")(f,h,!1,function(t){i("unhM")},null,null);e.default=g.exports},unhM:function(t,e){}});
//# sourceMappingURL=20.a36fbc8d9627ee5e30c2.js.map