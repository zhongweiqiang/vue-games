webpackJsonp([32,75,76],{"/uYn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("//Fk"),a=n.n(i),o=n("STSY"),s=n("BDJ3"),c=n("lzQ5"),l=[{title:"id",dataIndex:"id",align:"center",fixed:"left"},{title:"角色名称",dataIndex:"name",align:"center"},{title:"角色描述",dataIndex:"description",align:"center"},{title:"Action",scopedSlots:{customRender:"action"},align:"center",fixed:"right"}],d={components:{MenuDrawer:s.default,PermDrawer:c.default},data:function(){return{data:[],columns:l,loading:!0}},created:function(){this.roleList()},mounted:function(){},methods:{roleList:function(){var e=this;Object(o.d)().then(function(t){e.data=t.data,e.loading=!1})},edit:function(e){this.$router.push({name:"RoleEdit",query:{id:e}})},del:function(e){var t=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new a.a(function(n,i){Object(o.b)({id:e}).then(function(e){200==e.code&&(t.$message.success("删除成功"),t.roleList(),t.destroyAll())})})},onCancel:function(){t.destroyAll(),t.$message.info("取消删除",2)}})},destroyAll:function(){this.$destroyAll()},roleAdd:function(){this.$router.push({name:"RoleAdd"})},perm_list:function(e){console.log("this is perm list "+e),this.visible=!0},handleOk:function(e){console.log(e),this.visible=!1}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"max-width":"80%"}},[n("a-button",{attrs:{size:"small",type:"primary"},on:{click:e.roleAdd}},[n("a-icon",{attrs:{type:"plus"}}),e._v("角色\n  ")],1),e._v(" "),n("a-table",{attrs:{pagination:!1,columns:e.columns,dataSource:e.data,loading:e.loading,rowKey:function(e){return e.id},scroll:{x:500}},scopedSlots:e._u([{key:"action",fn:function(t){return n("span",{},[n("a-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:function(n){return e.edit(t.id)}}}),e._v(" "),n("a-button",{attrs:{size:"small",type:"danger",icon:"delete"},on:{click:function(n){return e.del(t.id)}}}),e._v(" "),n("menu-drawer",{attrs:{id:t.id}}),e._v(" "),n("perm-drawer",{attrs:{id:t.id}})],1)}}])})],1)},staticRenderFns:[]},u=n("VU/8")(d,r,!1,null,null,null);t.default=u.exports},BDJ3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("//Fk"),a=n.n(i),o=n("bUp0"),s=n("vLgD");n("/Luh");var c={props:{id:Number},mounted:function(){},data:function(){return{visible:!1,expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],treeData:[]}},watch:{checkedKeys:function(e){console.log("onCheck",e)}},methods:{showDrawer:function(){var e=this;this.getTreeMenu(),setTimeout(function(){e.visible=!0},300)},onClose:function(){this.visible=!1},getTreeMenu:function(){var e=this;new a.a(function(t){Object(o.g)().then(function(n){e.treeData=n.data,t()})}).then(function(){e.getSelectedMenu()})},add:function(){var e,t=this;(e={role_id:this.id,menu_id:this.checkedKeys},Object(s.a)({url:"/v1/role_menu/store",method:"post",data:e})).then(function(e){t.$message.success("分配成功"),t.onClose()})},getSelectedMenu:function(){var e,t=this;(e={role_id:this.id},Object(s.a)({url:"/v1/role_menu/index",method:"get",params:e})).then(function(e){t.checkedKeys=e.data.menu_id,t.expandedKeys=e.data.menu_id})},onExpand:function(e){console.log("onExpand",e),this.expandedKeys=e,this.autoExpandParent=!1},onCheck:function(e){console.log("onCheck",e),this.checkedKeys=e},onSelect:function(e,t){console.log("onSelect",t),this.selectedKeys=e}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline"}},[n("a-button",{attrs:{size:"small",type:"primary"},on:{click:e.showDrawer}},[e._v("菜单")]),e._v(" "),n("a-drawer",{attrs:{title:"分配菜单",placement:"right",closable:!0,visible:e.visible,width:400},on:{close:e.onClose}},[n("div",{staticStyle:{width:"200px",margin:"0 auto"}},[n("a-tree",{attrs:{checkable:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,selectedKeys:e.selectedKeys,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}}),e._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("a-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]},d=n("VU/8")(c,l,!1,null,null,null);t.default=d.exports},lzQ5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("//Fk"),a=n.n(i),o=n("zp1X"),s=n("vLgD");var c={props:{id:Number},mounted:function(){},data:function(){return{visible:!1,expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],treeData:[]}},watch:{checkedKeys:function(e){console.log("onCheck",e)}},methods:{showDrawer:function(){var e=this;this.getTreePerm(),setTimeout(function(){e.visible=!0},300)},onClose:function(){this.visible=!1},getTreePerm:function(){var e=this;new a.a(function(t){Object(o.g)().then(function(n){e.treeData=n.data,t()})}).then(function(){e.getSelectedPerm()})},getSelectedPerm:function(){var e,t=this;(e={role_id:this.id},Object(s.a)({url:"/v1/role_perm/index",method:"get",params:e})).then(function(e){t.checkedKeys=e.data.perm_id,t.expandedKeys=e.data.perm_id})},add:function(){var e,t=this;(e={role_id:this.id,perm_id:this.checkedKeys},Object(s.a)({url:"/v1/role_perm/store",method:"post",data:e})).then(function(e){t.$message.success("分配成功"),t.onClose()})},onExpand:function(e){console.log("onExpand",e),this.expandedKeys=e,this.autoExpandParent=!1},onCheck:function(e){console.log("onCheck",e),this.checkedKeys=e},onSelect:function(e,t){console.log("onSelect",t),this.selectedKeys=e}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline"}},[n("a-button",{attrs:{size:"small",type:"primary"},on:{click:e.showDrawer}},[e._t("default",[e._v("权限")])],2),e._v(" "),n("a-drawer",{attrs:{title:"分配权限",placement:"right",closable:!0,visible:e.visible,width:300},on:{close:e.onClose}},[n("div",{staticStyle:{width:"200px",margin:"0 auto"}},[n("a-tree",{attrs:{checkable:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,selectedKeys:e.selectedKeys,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}}),e._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("a-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]},d=n("VU/8")(c,l,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=32.b94743227410729744ff.js.map