{"version":3,"sources":["webpack:///src/views/system/roles/PermDrawer.vue","webpack:///./src/api/role_perm.js","webpack:///./src/views/system/roles/PermDrawer.vue?d38f","webpack:///./src/views/system/roles/PermDrawer.vue"],"names":["PermDrawer","props","id","Number","mounted","data","visible","expandedKeys","autoExpandParent","checkedKeys","selectedKeys","treeData","watch","val","console","log","methods","showDrawer","_this","this","getTreePerm","setTimeout","onClose","_this2","promise_default","a","resolve","Object","perm","then","response","getSelectedPerm","_this3","role_id","request","url","method","params","perm_id","add","_this4","$message","success","onExpand","onCheck","onSelect","info","roles_PermDrawer","render","_vm","_h","$createElement","_c","_self","staticStyle","display","attrs","size","type","on","click","_t","_v","title","placement","closable","width","close","margin","checkable","expand","select","model","value","callback","$$v","expression","margin-top","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"uJAmCA,IAAAA,GACAC,OACAC,GAAAC,QAEAC,QAJA,aAOAC,KAPA,WAQA,OACAC,SAAA,EAEAC,gBACAC,kBAAA,EACAC,eACAC,gBACAC,cAIAC,OACAH,YADA,SACAI,GACAC,QAAAC,IAAA,UAAAF,KAGAG,SACAC,WADA,WACA,IAAAC,EAAAC,KACAA,KAAAC,cAEAC,WAAA,WACAH,EAAAZ,SAAA,GACA,MAEAgB,QARA,WASAH,KAAAb,SAAA,GAGAc,YAZA,WAYA,IAAAG,EAAAJ,KACA,IAAUK,EAAAC,EAAV,SAAAC,GACQC,OAAAC,EAAA,EAAAD,GAARE,KAAA,SAAAC,GACAP,EAAAZ,SAAAmB,EAAAzB,KAEAqB,QAEAG,KAAA,WACAN,EAAAQ,qBAIAA,gBAxBA,WAwBA,ICjFsB1B,EDiFtB2B,EAAAb,MCjFsBd,GDkFtB4B,QAAAd,KAAAjB,ICjFWgC,aACHC,IAAK,sBACLC,OAAQ,MACRC,OAAQhC,KD8EhBwB,KAAA,SAAAC,GACAE,EAAAvB,YAAAqB,EAAAzB,KAAAiC,QACAN,EAAAzB,aAAAuB,EAAAzB,KAAAiC,WAIAC,IA/BA,WA+BA,IChFsBlC,EDgFtBmC,EAAArB,MChFsBd,GDiFtB4B,QAAAd,KAAAjB,GAAAoC,QAAAnB,KAAAV,aChFWyB,aACHC,IAAK,sBACLC,OAAQ,OACR/B,UD6ERwB,KACA,SAAAC,GAEAU,EAAAC,SAAAC,QAAA,QACAF,EAAAlB,aAMAqB,SA1CA,SA0CApC,GACAO,QAAAC,IAAA,WAAAR,GAGAY,KAAAZ,eACAY,KAAAX,kBAAA,GAEAoC,QAjDA,SAiDAnC,GACAK,QAAAC,IAAA,UAAAN,GACAU,KAAAV,eAEAoC,SArDA,SAqDAnC,EAAAoC,GACAhC,QAAAC,IAAA,WAAA+B,GACA3B,KAAAT,kBE/GeqC,GADEC,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,aAAaC,QAAA,YAAoBH,EAAA,YAAiBI,OAAOC,KAAA,QAAAC,KAAA,WAAgCC,IAAKC,MAAAX,EAAAhC,cAAwBgC,EAAAY,GAAA,WAAAZ,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,YAAkEI,OAAOO,MAAA,OAAAC,UAAA,QAAAC,UAAA,EAAA3D,QAAA2C,EAAA3C,QAAA4D,MAAA,KAAqFP,IAAKQ,MAAAlB,EAAA3B,WAAqB8B,EAAA,OAAYE,aAAaY,MAAA,QAAAE,OAAA,YAAmChB,EAAA,UAAeI,OAAOa,UAAA,GAAA9D,aAAA0C,EAAA1C,aAAAC,iBAAAyC,EAAAzC,iBAAAE,aAAAuC,EAAAvC,aAAAC,SAAAsC,EAAAtC,UAA+IgD,IAAKW,OAAArB,EAAAN,SAAA4B,OAAAtB,EAAAJ,UAA4C2B,OAAQC,MAAAxB,EAAA,YAAAyB,SAAA,SAAAC,GAAiD1B,EAAAxC,YAAAkE,GAAoBC,WAAA,iBAA2B3B,EAAAa,GAAA,KAAAV,EAAA,OAAwBE,aAAauB,aAAA,UAAqBzB,EAAA,YAAiBI,OAAOE,KAAA,UAAAD,KAAA,SAAgCE,IAAKC,MAAAX,EAAAV,OAAiBU,EAAAa,GAAA,uBAEz4BgB,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACEjF,EACA+C,GATF,EAEA,KAEA,KAEA,MAUemC,EAAA,QAAAH,EAAiB","file":"static/js/75.fa7cdf8e9cc20d1c2cb7.js","sourcesContent":["<template>\n  <div style=\"display: inline;\">\n    <a-button size=\"small\" type=\"primary\" @click=\"showDrawer\">\n      <slot>权限</slot>\n    </a-button>\n    <a-drawer\n      title=\"分配权限\"\n      placement=\"right\"\n      :closable=\"true\"\n      @close=\"onClose\"\n      :visible=\"visible\"\n      :width=\"300\"\n    >\n      <!-- tree 控件 -->\n      <div style=\"width: 200px; margin: 0 auto;\">\n        <a-tree\n          checkable\n          @expand=\"onExpand\"\n          :expandedKeys=\"expandedKeys\"\n          :autoExpandParent=\"autoExpandParent\"\n          v-model=\"checkedKeys\"\n          @select=\"onSelect\"\n          :selectedKeys=\"selectedKeys\"\n          :treeData=\"treeData\"\n        />\n        <div style=\"margin-top: 30px;\">\n          <a-button type=\"primary\" size=\"small\" @click=\"add\">确认</a-button>\n        </div>\n      </div>\n    </a-drawer>\n  </div>\n</template>\n<script>\nimport { tree } from \"@/api/perm\";\nimport { store, index } from \"@/api/role_perm\";\nexport default {\n  props: {\n    id: Number\n  },\n  mounted() {\n    // console.log(this.id)\n  },\n  data() {\n    return {\n      visible: false,\n      // tree数据\n      expandedKeys: [],\n      autoExpandParent: true,\n      checkedKeys: [], // 选中的数据\n      selectedKeys: [],\n      treeData: []\n    };\n  },\n\n  watch: {\n    checkedKeys(val) {\n      console.log(\"onCheck\", val);\n    }\n  },\n  methods: {\n    showDrawer() {\n      this.getTreePerm();\n\n      setTimeout(() => {\n        this.visible = true;\n      }, 300);\n    },\n    onClose() {\n      this.visible = false;\n    },\n\n    getTreePerm() {\n      new Promise(resolve => {\n        tree().then(response => {\n          this.treeData = response.data;\n          // console.log(\"tree\", response);\n          resolve();\n        });\n      }).then(() => {\n        this.getSelectedPerm();\n      });\n    },\n\n    getSelectedPerm() {\n      index({ role_id: this.id }).then(response => {\n        this.checkedKeys = response.data.perm_id;\n        this.expandedKeys = response.data.perm_id;\n      });\n    },\n\n    add() {\n      store({ role_id: this.id, perm_id: this.checkedKeys }).then(\n        response => {\n          // console.log(response);\n          this.$message.success(\"分配成功\");\n          this.onClose();\n        }\n      );\n    },\n\n    // tree methods\n    onExpand(expandedKeys) {\n      console.log(\"onExpand\", expandedKeys);\n      // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n      // or, you can remove all expanded children keys.\n      this.expandedKeys = expandedKeys;\n      this.autoExpandParent = false;\n    },\n    onCheck(checkedKeys) {\n      console.log(\"onCheck\", checkedKeys);\n      this.checkedKeys = checkedKeys;\n    },\n    onSelect(selectedKeys, info) {\n      console.log(\"onSelect\", info);\n      this.selectedKeys = selectedKeys;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/roles/PermDrawer.vue","import request from '@/utils/request'\n\nexport function index(data) {\n    return request({\n        url: '/v1/role_perm/index',\n        method: 'get',\n        params: data\n    })\n}\n\nexport function store(data){\n    return request({\n        url: '/v1/role_perm/store',\n        method: 'post',\n        data\n    })\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/role_perm.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline\"}},[_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.showDrawer}},[_vm._t(\"default\",[_vm._v(\"权限\")])],2),_vm._v(\" \"),_c('a-drawer',{attrs:{\"title\":\"分配权限\",\"placement\":\"right\",\"closable\":true,\"visible\":_vm.visible,\"width\":300},on:{\"close\":_vm.onClose}},[_c('div',{staticStyle:{\"width\":\"200px\",\"margin\":\"0 auto\"}},[_c('a-tree',{attrs:{\"checkable\":\"\",\"expandedKeys\":_vm.expandedKeys,\"autoExpandParent\":_vm.autoExpandParent,\"selectedKeys\":_vm.selectedKeys,\"treeData\":_vm.treeData},on:{\"expand\":_vm.onExpand,\"select\":_vm.onSelect},model:{value:(_vm.checkedKeys),callback:function ($$v) {_vm.checkedKeys=$$v},expression:\"checkedKeys\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"30px\"}},[_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.add}},[_vm._v(\"确认\")])],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7522b8a6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/system/roles/PermDrawer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PermDrawer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PermDrawer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7522b8a6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PermDrawer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/roles/PermDrawer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}